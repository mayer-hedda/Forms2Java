<?xml version = '1.0' encoding = 'UTF-8'?>
<Module version="141020000" xmlns="http://xmlns.oracle.com/Forms">
   <FormModule Name="DYNAMIC_FORM" DirtyInfo="true" Title="dynamic_form" ConsoleWindow="WIN1" RecordVisualAttributeGroupName="" MenuModule="DEFAULT&amp;SMARTBAR">
      <Coordinate CharacterCellWidth="9" RealUnit="Pixel" DefaultFontScaling="false" CharacterCellHeight="19" CoordinateSystem="Real"/>
      <Alert Name="AL_EXIT" DirtyInfo="true" Button1Label="Yes" Button2Label="No" Title="Exit the form" AlertMessage="Do you want to commit the change ?"/>
      <Block Name="CTRL" DirtyInfo="true" ScrollbarWidth="18" ScrollbarLength="180">
         <Item Name="C" DirtyInfo="true" Width="90" MaximumLength="4000" Visible="false" Height="18"/>
         <Item Name="N" DirtyInfo="true" Width="90" MaximumLength="30" Visible="false" DataType="Number" Height="18"/>
         <Item Name="D" DirtyInfo="true" Width="90" MaximumLength="30" Visible="false" DataType="Date" Height="18"/>
         <Item Name="TITLE_BL1" TabPageName="" Width="379" InsertAllowed="false" MaximumLength="100" UpdateAllowed="false" XPosition="16" FontName="Tahoma" YPosition="7" Bevel="None" FontSize="800" FontStyle="Plain" DirtyInfo="true" FontWeight="Bold" FontSpacing="Normal" CanvasName="CV1" Height="18"/>
      </Block>
      <Block Name="BL1" RecordsDisplayCount="17" InsertAllowed="true" RecordVisualAttributeGroupName="VA_CURREC" DirtyInfo="true" ScrollbarCanvasName="SPREAD" ScrollbarTabPageName="" QueryDataSourceType="Transactional Triggers" ScrollbarWidth="19" ScrollbarXPosition="509" ScrollbarYPosition="25" ShowScrollbar="false" ScrollbarLength="320">
         <Item Name="INDICE" DatabaseItem="false" DirtyInfo="true" Width="90" Visible="false" DataType="Number" Height="18"/>
         <Item Name="TI_C_01" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="13" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_02" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="110" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_03" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_04" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_05" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_06" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="13" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_07" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="110" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_08" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_09" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_10" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_11" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="13" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_12" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="110" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_13" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_14" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_15" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_16" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="13" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_17" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="110" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_18" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_19" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_C_20" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="4000" BackColor="white" XPosition="207" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_01" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="305" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_02" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_03" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_04" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_05" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_06" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="305" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_07" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_08" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_09" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_N_10" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Number" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_D_01" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Datetime" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" FormatMask="DD/MM/YYYY" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_D_02" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Datetime" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" FormatMask="DD/MM/YYYY" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_D_03" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Datetime" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" FormatMask="DD/MM/YYYY" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_D_04" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Datetime" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" FormatMask="DD/MM/YYYY" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Item Name="TI_D_05" PromptAttachmentEdge="Top" TabPageName="" Width="91" MaximumLength="30" DataType="Datetime" BackColor="white" XPosition="402" YPosition="24" DirtyInfo="true" FormatMask="DD/MM/YYYY" CanvasName="SPREAD" Visible="true" QueryLength="4001" Height="19"/>
         <Trigger Name="KEY-DELREC" DirtyInfo="true" TriggerText="Declare&amp;#10;&#x9;LN$Rec    Pls_Integer ;&amp;#10;&#x9;LC$Rowid  Varchar2(50); &amp;#10;Begin&#x9;&amp;#10;&#x9;&amp;#10;&#x9;-- Mark record to Deleting --&amp;#10;&#x9;LN$Rec := :BL1.INDICE ;&amp;#10;&amp;#10;&#x9;LC$Rowid := PKG_VARS.T_Datas(LN$Rec)(1) ;&amp;#10;&amp;#10;&#x9;:CTRL.C := Null ;&amp;#10;&#x9;:CTRL.N := Null ;&amp;#10;&#x9;:CTRL.D := Null ;&amp;#10;&#x9;&amp;#10;&#x9;Delete_Record ;&amp;#10;&amp;#10;&#x9;If LC$Rowid IS NOT NULL Then&amp;#10;&#x9;  PKG_VARS.T_Check( LN$Rec ) := 2 ;&amp;#10;&#x9;  PKG_VARS.GB$Changed := TRUE ;&amp;#10;&#x9;Else&amp;#10;&#x9;&#x9;PKG_VARS.T_Check( LN$Rec ) := 0 ;&amp;#10;&#x9;End if ;&amp;#10;&#x9;&amp;#10;End ;"/>
         <Trigger Name="WHEN-CREATE-RECORD" DirtyInfo="true" TriggerText="Declare&amp;#10;&#x9;LC$Item   Varchar2(60) ;&amp;#10;Begin&#x9;&amp;#10;  If :System.mode &lt;> 'ENTER-QUERY' Then&amp;#10;&amp;#10;&#x9;If Not PKG_VARS.GB$Query Then&amp;#10;&#x9;&amp;#10;&#x9;&#x9;:BL1.INDICE := PKG_VARS.T_Datas.Last + 1 ;&amp;#10;&amp;#10;&#x9;&#x9;PKG_VARS.T_Check( :BL1.INDICE ) := 3 ;&amp;#10;&#x9;&#x9;PKG_VARS.T_Datas( :BL1.INDICE )(1) := NULL ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Set Initial values --&amp;#10;&#x9;&#x9;LC$Item := PKG_VARS.GC$FirstItem ;&amp;#10;&#x9;&#x9;For i IN PKG_VARS.T_Cols.First .. PKG_VARS.T_Cols.Last Loop&amp;#10;&#x9;&#x9;&#x9;&amp;#10;&#x9;&#x9;&#x9;If PKG_VARS.T_Cols(i).C_INITVALUE is not null Then&amp;#10;&#x9;&#x9;&#x9;&#x9; If PKG_VARS.T_Cols(i).C_INITVALUE = 'SYSDATE' Then&amp;#10;&#x9;&#x9;&#x9;&#x9; &#x9; Copy( SYSDATE, LC$Item ) ;&amp;#10;&#x9;&#x9;&#x9;&#x9; Else&amp;#10;&#x9;&#x9;&#x9;&#x9;   Copy( PKG_VARS.T_Cols(i).C_INITVALUE, LC$Item ) ;&amp;#10;&#x9;&#x9;&#x9;&#x9; End if ;&amp;#10;&#x9;&#x9;&#x9;End if ;&amp;#10;&#x9;&#x9;&#x9;&amp;#10;&#x9;&#x9;&#x9;LC$Item := Get_Item_Property( LC$ITEM, NEXT_NAVIGATION_ITEM ) ;&amp;#10;&#x9;&#x9;&#x9;&amp;#10;&#x9;&#x9;End loop ;&amp;#10;&#x9;&amp;#10;&#x9;End if ;&amp;#10;&#x9;&amp;#10;&#x9;End if ;&amp;#10;End ;"/>
         <Trigger Name="WHEN-NEW-RECORD-INSTANCE" DirtyInfo="true" TriggerText="-- Place focus on First navigable item --&amp;#10;If Not PKG_VARS.GB$Query Then&amp;#10;&#x9;If :System.Record_Status = 'NEW' Then&amp;#10;&#x9;  Go_Item( PKG_VARS.GC$FirstItem ) ;&amp;#10;&#x9;End if ;&amp;#10;End if ;"/>
         <Trigger Name="KEY-EXEQRY" DirtyInfo="true" TriggerText="Declare&amp;#10;&#x9;LC$Item  Varchar2(61) ;&amp;#10;&#x9;LC$Clause Varchar2(200) ;&amp;#10;&#x9;LC$Where Varchar2(2000) ;&amp;#10;&#x9;LC$Key   Varchar2(10) := ' WHERE ' ;&amp;#10;&#x9;LC$Type  Varchar2(30) ;&amp;#10;Begin&#x9;&amp;#10;  &amp;#10;  If :System.mode = 'ENTER-QUERY' Then&amp;#10;  -- Init the Where clause --&amp;#10;&#x9;LC$Item := PKG_VARS.GC$FirstItem ;&amp;#10;&#x9;For i IN PKG_VARS.T_Cols.First .. PKG_VARS.T_Cols.Last Loop&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;LC$Type := Get_Item_Property( LC$Item, DATATYPE ) ;&amp;#10;&#x9;&#x9;LC$Clause := Name_In( LC$Item ) ;&amp;#10;&#x9;&#x9;If LC$Clause Is Not Null Then&amp;#10;&#x9;&#x9;&#x9; If Instr( LC$Clause, '>' ) > 0&amp;#10;&#x9;&#x9;&#x9; Or Instr( LC$Clause, '&lt;' ) > 0&amp;#10;&#x9;&#x9;&#x9; Or Instr( Upper(LC$Clause), 'BETWEEN' ) > 0&amp;#10;&#x9;&#x9;&#x9; Or Instr( Upper(LC$Clause), 'LIKE' ) > 0&amp;#10;&#x9;&#x9;&#x9; Then&amp;#10;&#x9;&#x9;&#x9;    LC$Where := LC$Where || LC$Key || PKG_VARS.T_Cols(i).C_COL || ' ' || LC$Clause ;&amp;#10;&#x9;&#x9;&#x9;    LC$Key := ' AND ' ;&amp;#10;&#x9;&#x9;&#x9; Else&amp;#10;&#x9;&#x9;&#x9;    If LC$Type = 'NUMBER' Then&amp;#10;&#x9;&#x9;&#x9;       LC$Where := LC$Where || LC$Key || PKG_VARS.T_Cols(i).C_COL || ' = ' || LC$Clause ;&amp;#10;&#x9;&#x9;&#x9;    Else&amp;#10;&#x9;&#x9;&#x9;    &#x9;LC$Where := LC$Where || LC$Key || PKG_VARS.T_Cols(i).C_COL || ' = ''' || LC$Clause || '''' ;&amp;#10;&#x9;&#x9;&#x9;    End if ;&amp;#10;&#x9;&#x9;&#x9;    LC$Key := ' AND ' ;&#x9;&#x9;&#x9; &#x9;&amp;#10;&#x9;&#x9;&#x9; End if ;&amp;#10;&#x9;&#x9;End if ;&amp;#10;&#x9;&amp;#10;&#x9;&#x9;LC$Item := Get_Item_Property( LC$ITEM, NEXT_NAVIGATION_ITEM ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;End loop ;&amp;#10;  &amp;#10;     --F_Trace('Query : ' || LC$Where, 'T' ) ;  &amp;#10;     Stop_QRY ;&amp;#10;  &#x9; Exit_Form ;&amp;#10;  End if ;&amp;#10;  &amp;#10;  Clear_Message ;&amp;#10;  &amp;#10;  -- Query datas --&amp;#10;  PKG_DATAS.Query( :System.Trigger_Block, LC$Where ) ;&amp;#10;  &amp;#10;End ;  "/>
         <Trigger Name="KEY-ENTQRY" DirtyInfo="true" TriggerText="Start_QRY ;&amp;#10;Enter_Query ;"/>
         <Trigger Name="PRE-QUERY" DirtyInfo="true" TriggerText="Message('pre-query',acknowledge);"/>
         <Trigger Name="ON-LOCK" DirtyInfo="true" TriggerText="Declare&amp;#10;&#x9;LC$Err   Varchar2(256) ;&amp;#10;&#x9;LB$Ret   Boolean ;&amp;#10;Begin&#x9;&amp;#10;  LB$Ret := PKG_DYNAMIC.Lock_Row( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Datas(:BL1.INDICE), LC$Err ) ;&amp;#10;End ;"/>
      </Block>
      <Canvas Name="CV1" BackColor="r100g100b100" DirtyInfo="true" Width="720" WindowName="WIN1" Height="432" ViewportHeight="432" ViewportWidth="720"/>
      <Canvas Name="SPREAD" ShowHorizontalScrollbar="true" CanvasType="Stacked" Width="2000" WindowName="WIN1" BackColor="r75g100b88" DirtyInfo="true" ForegroundColor="black" DisplayViewport="true" ShowVerticalScrollbar="true" Height="400" ViewportHeight="380" ViewportXPosition="7" ViewportWidth="680" ViewportYPosition="36"/>
      <ModuleParameter Name="PM$DIALOG" DirtyInfo="true" ParameterInitializeValue="Employees"/>
      <ProgramUnit Name="PKG_VARS" ProgramUnitText="PACKAGE PKG_VARS IS&amp;#10;&amp;#10;  TYPE TYP_CHECK IS TABLE OF PLS_INTEGER INDEX BY PLS_INTEGER ;&amp;#10;  &amp;#10;  T_Struct   PKG_DYNAMIC.T2 ;&amp;#10;  T_Datas    PKG_DYNAMIC.T2 ;&amp;#10;  T_Query    PKG_DYNAMIC.T1 ;&amp;#10;  T_Cols     PKG_DYNAMIC.TYP_COLS ;&amp;#10;  T_Check    TYP_CHECK ;&amp;#10;  &amp;#10;  GC$Req     Varchar2(4000) ;&amp;#10;  &amp;#10;  GN$NbRaws  Pls_Integer := 0 ;&amp;#10;  &amp;#10;  GC$Dialog  DYN_DIALOG.D_NAME%Type ;&amp;#10;  &amp;#10;  GC$FirstItem  Varchar2(60) ;&amp;#10;  &amp;#10;  GB$Query    Boolean := FALSE ;&amp;#10;  &amp;#10;  GB$Changed  Boolean := FALSE ;&amp;#10;    &amp;#10;END;" ProgramUnitType="Package Spec"/>
      <ProgramUnit Name="PKG_DATAS" ProgramUnitText="PACKAGE PKG_DATAS IS&amp;#10;  &amp;#10;  GR$Rec  DYN_DIALOG%ROWTYPE ;&amp;#10;   &amp;#10;  -- Build the block--&amp;#10;  Procedure Build ( PC$BlkName IN Varchar2 ) ;&amp;#10;  &amp;#10;  -- Query the bloc --&amp;#10;  Procedure Query ( PC$BlkName IN Varchar2, PC$Where IN Varchar2 DEFAULT NULL ) ;&amp;#10;  &amp;#10;  -- Get Dialog info --&amp;#10;  Procedure Get_Dialog_Info ( PC$DlgName IN Varchar2 ) ;&amp;#10;  &amp;#10;  -- Update raw --&amp;#10;  Procedure Update_Raw ;&amp;#10;&amp;#10;  -- Get Column info --&amp;#10;  Function Get_Col_Info ( PC$ColName IN Varchar2, PR$Col OUT DYN_COLS%ROWTYPE )&amp;#10;  Return Boolean ;&amp;#10;  &amp;#10;END;" ProgramUnitType="Package Spec"/>
      <ProgramUnit Name="PKG_DATAS" ProgramUnitText="PACKAGE BODY PKG_DATAS IS&amp;#10;  &amp;#10;  -----------------------&amp;#10;  --  Build the block  --&amp;#10;  -----------------------&amp;#10;  Procedure Build ( PC$BlkName IN Varchar2 )&amp;#10;  Is&amp;#10;&#x9;&#x9;LC$Req   Varchar2(1024) ;&amp;#10;&#x9;&#x9;LC$Item  Varchar2(60) ;&amp;#10;&#x9;&#x9;LC$First Varchar2(60) ;&amp;#10;&#x9;&#x9;LC$Prev  Varchar2(60) ;&amp;#10;&#x9;&#x9;LC$Next  Varchar2(60) ;    &amp;#10;&#x9;&#x9;LC$Name  Varchar2(30) ;&amp;#10;&#x9;&#x9;LC$Type  Varchar2(3) ;&amp;#10;    LN$NNull Pls_Integer ;&amp;#10;&#x9;&#x9;LN$Prec  Pls_Integer ;&amp;#10;&#x9;&#x9;LN$Size  Pls_Integer ;&amp;#10;&#x9;&#x9;LN$Width Pls_Integer ;&amp;#10;&#x9;&#x9;LN$TotX  Pls_Integer ;&amp;#10;&#x9;&#x9;LN$C     Pls_Integer := 0 ;&amp;#10;&#x9;&#x9;LN$N     Pls_Integer := 0 ;&amp;#10;&#x9;&#x9;LN$D     Pls_Integer := 0 ;&amp;#10;&#x9;&#x9;LN$Num   Pls_Integer ;&amp;#10;&#x9;&#x9;LN$X     Pls_Integer ;&amp;#10;&#x9;&#x9;LN$Y     Pls_Integer ;&amp;#10;&#x9;&#x9;LR$Col   DYN_COLS%ROWTYPE ;&amp;#10;&#x9;&#x9;LB$Res   Boolean ;&amp;#10;  Begin&amp;#10;  &#x9;&amp;#10;        &amp;#10;&#x9;&#x9;LN$X := Get_Item_Property( 'TI_C_01', X_POS ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Select order of the dialog --&amp;#10;&#x9;&#x9;LC$Req := GR$Rec.d_query ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Get data structure --&amp;#10;&#x9;&#x9;PKG_DYNAMIC.Get_Struct( LC$Req, PKG_VARS.T_Struct ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Get columns info --&amp;#10;&#x9;&#x9;PKG_DYNAMIC.Get_Cols_Info ( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Cols ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Set the title of the block --&amp;#10;&#x9;&#x9;Go_Item( 'CTRL.TITLE_BL1' ) ;&amp;#10;&#x9;&#x9;LC$Item := 'TITLE_' || PC$BlkName  ;&amp;#10;&#x9;&#x9;Copy( GR$Rec.D_TITLE, LC$Item ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Set the Title of the window --&amp;#10;&#x9;&#x9;Set_Window_Property( 'WIN1', TITLE, GR$Rec.D_NAME ) ;&amp;#10;&#x9;&#x9;&amp;#10;    -- Hide all columns --&amp;#10;    For I IN 1 .. 20 Loop&amp;#10;    &#x9; LC$Item := PC$BlkName || '.TI_C_' || Ltrim( To_Char( i, '00' ) ) ;&amp;#10;    &#x9; Set_Item_Property( LC$Item, VISIBLE, PROPERTY_FALSE ) ;&amp;#10;    End loop ;&amp;#10;    For I IN 1 .. 10 Loop&amp;#10;    &#x9; LC$Item := PC$BlkName || '.TI_N_' || Ltrim( To_Char( i, '00' ) ) ;&amp;#10;    &#x9; Set_Item_Property( LC$Item, VISIBLE, PROPERTY_FALSE ) ;&amp;#10;    End loop ;&amp;#10;    For I IN 1 .. 5 Loop&amp;#10;    &#x9; LC$Item := PC$BlkName || '.TI_D_' || Ltrim( To_Char( i, '00' ) ) ;&amp;#10;    &#x9; Set_Item_Property( LC$Item, VISIBLE, PROPERTY_FALSE ) ;&amp;#10;    End loop ;    &amp;#10;    &amp;#10;&#x9;&#x9;-- Display corresponding columns --&amp;#10;&#x9;&#x9;For i IN PKG_VARS.T_Struct.First .. PKG_VARS.T_Struct.Last Loop&amp;#10;&amp;#10;&#x9;        LC$Name := PKG_VARS.T_Struct(i)(1) ;&amp;#10;&#x9;        &amp;#10;&#x9;        If LC$Name &lt;> 'ROWID' Then&amp;#10;&#x9;        &#x9;&amp;#10;            LB$Res := Get_Col_Info ( LC$Name, LR$Col ) ;&amp;#10;            &amp;#10;&#x9;&#x9;        LC$Type := PKG_VARS.T_Struct(i)(2) ;&amp;#10;&#x9;&#x9;        LN$Prec := PKG_VARS.T_Struct(i)(3) ;&amp;#10;&#x9;&#x9;        If LN$Prec = 0 Then&amp;#10;&#x9;&#x9;        &#x9; LN$Prec := 15 ;&amp;#10;&#x9;&#x9;        End if ;&amp;#10;&#x9;&#x9;        LN$Size := PKG_VARS.T_Struct(i)(5) ;&amp;#10;&#x9;&amp;#10;&#x9;&#x9;        If LC$Type = '1' Then -- Char&amp;#10;&#x9;&#x9;        &#x9; LC$Item := 'TI_C_' ;&amp;#10;&#x9;&#x9;        &#x9; LN$C := LN$C + 1 ;&amp;#10;&#x9;&#x9;        &#x9; LN$Num := LN$C ;&amp;#10;&#x9;        &#x9;   LN$Width := LN$Size  * 12 ;&amp;#10;&#x9;&#x9;        Elsif LC$Type = '2' Then -- Number&amp;#10;&#x9;&#x9;        &#x9; LC$Item := 'TI_N_' ;&amp;#10;&#x9;&#x9;        &#x9; LN$N := LN$N + 1 ;&amp;#10;&#x9;&#x9;        &#x9; LN$Num := LN$N ;&amp;#10;&#x9;        &#x9;   LN$Width := LN$Prec  * 12 ;&amp;#10;&#x9;&#x9;        Else&amp;#10;&#x9;&#x9;        &#x9;-- Date&amp;#10;&#x9;&#x9;        &#x9;LC$Item := 'TI_D_' ;&amp;#10;&#x9;&#x9;        &#x9;LN$D := LN$D + 1 ;&amp;#10;&#x9;&#x9;        &#x9;LN$Num := LN$D ;&amp;#10;&#x9;&#x9;        &#x9;LN$Width := 80 ;&amp;#10;&#x9;&#x9;        End if ;&amp;#10;&#x9;&amp;#10;&#x9;&#x9;        LC$Item := PC$BlkName || '.' || LC$Item || Ltrim( To_char(LN$Num, '00' ) ) ;&amp;#10;&#x9;&#x9;        If LB$Res And LR$Col.C_VISIBLE = 'Y' Then&amp;#10;&#x9;&#x9;        If LN$X + LN$Width > Get_Canvas_Property( 'SPREAD', WIDTH ) Then&amp;#10;&#x9;&#x9;        &#x9; Set_Canvas_Property( 'SPREAD', WIDTH, LN$X + LN$Width + 20 ) ;&amp;#10;&#x9;&#x9;        End if ;&amp;#10;&#x9;&#x9;        End if ;&amp;#10;&#x9;&#x9;        &amp;#10;&#x9;&#x9;        -- Previous/Next item --&amp;#10;&#x9;&#x9;        If LB$Res And LR$Col.C_VISIBLE = 'Y' Then&amp;#10;&#x9;&#x9;        If i = 2 Then&amp;#10;&#x9;&#x9;        &#x9;  LC$First := LC$Item ;&amp;#10;&#x9;&#x9;        &#x9;  LC$Prev := LC$Item ;&amp;#10;&#x9;&#x9;        &#x9;  PKG_VARS.GC$FirstItem := LC$First ;&amp;#10;&#x9;&#x9;        Else&amp;#10;&#x9;&#x9;            Set_Item_Property( LC$Item, PREVIOUS_NAVIGATION_ITEM, LC$Prev ) ;&amp;#10;&#x9;&#x9;            Set_Item_Property( LC$Prev, NEXT_NAVIGATION_ITEM, LC$Item ) ;&#x9; &#x9; &amp;#10;&#x9;&#x9;            LC$Prev := LC$Item ;&amp;#10;&#x9;&#x9;        End if ;&amp;#10;&#x9;&#x9;        End if ;&amp;#10;&#x9;&#x9;        &amp;#10;            Set_Item_Property( LC$Item, PROMPT_TEXT, InitCap(LC$Name) ) ;&amp;#10;            If LB$Res And LR$Col.C_VISIBLE = 'Y' Then&amp;#10;&#x9;&#x9;           Set_Item_Property( LC$Item, VISIBLE, PROPERTY_TRUE ) ;&amp;#10;            Else&amp;#10;            &#x9; Set_Item_Property( LC$Item, VISIBLE, PROPERTY_FALSE ) ;&amp;#10;            End if ;&amp;#10;            If LB$Res And LR$Col.C_VISIBLE = 'Y' Then&amp;#10;&#x9;&#x9;          Set_Item_Property( LC$Item, ENABLED, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;          Set_Item_Property( LC$Item, NAVIGABLE, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;          Set_Item_Property( LC$Item, INSERT_ALLOWED, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;          Set_Item_Property( LC$Item, UPDATE_ALLOWED, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;          Set_Item_Property( LC$Item, WIDTH, LN$Width ) ;&amp;#10;&#x9;&#x9;          Set_Item_Property( LC$Item, X_POS, LN$X ) ;&amp;#10;&#x9;&#x9;          LN$X := LN$X + LN$Width ;&amp;#10;&#x9;&#x9;        End if ;&amp;#10;&#x9;&#x9;        &amp;#10;&#x9;&#x9;        -- Column setting --&amp;#10;&#x9;&#x9;        If LB$Res Then&amp;#10;&#x9;&#x9;        &#x9; Set_Item_Property( LC$Item, PROMPT_TEXT, LR$Col.C_LABEL ) ;&amp;#10;&#x9;&#x9;        &#x9; If LR$Col.C_REQUIRED = 'Y' Then&amp;#10;&#x9;&#x9;        &#x9; &#x9;  Set_Item_Property( LC$Item, REQUIRED, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;        &#x9; Else&amp;#10;&#x9;&#x9;        &#x9; &#x9;  Set_Item_Property( LC$Item, REQUIRED, PROPERTY_FALSE ) ;&amp;#10;&#x9;&#x9;        &#x9; End if ;&amp;#10;&#x9;&#x9;        &#x9; If LR$Col.C_MASK IS NOT NULL Then&amp;#10;&#x9;&#x9;        &#x9; &#x9;  Set_Item_Property( LC$Item, FORMAT_MASK, LR$Col.C_MASK ) ;&amp;#10;&#x9;&#x9;        &#x9; End if ;&amp;#10;&#x9;&#x9;        &#x9; If LR$Col.C_QUERYABLE = 'Y' Then&amp;#10;&#x9;&#x9;        &#x9; &#x9;  Set_Item_Property( LC$Item, QUERYABLE, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;        &#x9; Else&amp;#10;&#x9;&#x9;        &#x9; &#x9;  Set_Item_Property( LC$Item, QUERYABLE, PROPERTY_FALSE ) ;&#x9;&#x9;        &#x9; &#x9;  &amp;#10;&#x9;&#x9;        &#x9; End if ;&amp;#10;&#x9;&#x9;        &#x9; If LR$Col.C_CASE = 'U' Then&amp;#10;&#x9;&#x9;        &#x9; &#x9;  Set_Item_Property( LC$Item, CASE_RESTRICTION, UPPERCASE ) ;&amp;#10;&#x9;&#x9;        &#x9; ElsIf LR$Col.C_CASE = 'L' Then&amp;#10;&#x9;&#x9;        &#x9; &#x9;  Set_Item_Property( LC$Item, CASE_RESTRICTION, LOWERCASE ) ;&amp;#10;&#x9;&#x9;        &#x9; Else&amp;#10;&#x9;&#x9;        &#x9; &#x9;  Set_Item_Property( LC$Item, CASE_RESTRICTION, NONE ) ;&#x9;&#x9;        &#x9; &#x9;  &amp;#10;&#x9;&#x9;        &#x9; End if ;&#x9;&#x9;        &#x9; &#x9;&#x9;        &#x9; &#x9;&#x9;        &#x9; &amp;#10;&#x9;&#x9;        End if ;&#x9;&#x9;        &amp;#10;&#x9;        &amp;#10;&#x9;        End if ;&amp;#10;&#x9;&amp;#10;&#x9;&#x9;End loop ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Previous/Next item for first and last items --&amp;#10;&#x9;&#x9;Set_Item_Property( LC$Item,  NEXT_NAVIGATION_ITEM, LC$First ) ;&amp;#10;&#x9;&#x9;Set_Item_Property( LC$First, PREVIOUS_NAVIGATION_ITEM, LC$Item ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;LN$X := LN$X + 10 ;&amp;#10;&amp;#10;&#x9;&#x9;If PKG_VARS.GN$NbRaws > 0 Then&amp;#10;&#x9;&#x9;  Set_View_Property( 'SPREAD', HEIGHT, (PKG_VARS.GN$NbRaws * 20 ) + 20) ;&#x9;&#x9;&amp;#10;&#x9;&#x9;End if ;&amp;#10;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;  &#x9;&amp;#10;  End Build ;&amp;#10;  &amp;#10;  &amp;#10;  -----------------------&amp;#10;  --  Query the block  --&amp;#10;  -----------------------&amp;#10;  Procedure Query ( PC$BlkName IN Varchar2, PC$Where IN Varchar2 DEFAULT NULL )&amp;#10;  Is&amp;#10;&#x9;&#x9;LC$Req   Varchar2(1024) ;&amp;#10;&#x9;&#x9;LC$Item  Varchar2(30) ;&amp;#10;&#x9;&#x9;LC$Type  Varchar2(3) ;&amp;#10;&#x9;&#x9;LN$C     Pls_Integer := 0 ;&amp;#10;&#x9;&#x9;LN$N     Pls_Integer := 0 ;&amp;#10;&#x9;&#x9;LN$D     Pls_Integer := 0 ;&amp;#10;&#x9;&#x9;LN$Num   Pls_Integer ;&amp;#10;  Begin&amp;#10;&amp;#10;&#x9;&#x9;PKG_VARS.GB$Query := TRUE ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;LC$Req := GR$Rec.d_query ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;Go_Block( PC$BlkName ) ;&amp;#10;&#x9;&#x9;If not FORM_SUCCESS Then&amp;#10;&#x9;&#x9;&#x9; Raise Form_Trigger_Failure ;&amp;#10;&#x9;&#x9;End if ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;Clear_Block( ASK_COMMIT ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;Set_Block_Property( 'BL1', INSERT_ALLOWED, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Query the datas --&amp;#10;&#x9;&#x9;PKG_DYNAMIC.Dynamic_Cursor( LC$Req, PKG_VARS.T_Struct, PKG_VARS.T_Datas, PC$Where ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Display datas --&amp;#10;&#x9;&#x9;For i IN PKG_VARS.T_Datas.First .. PKG_VARS.T_Datas.Last Loop&amp;#10;&amp;#10;&#x9;&#x9;&#x9; If :System.record_Status &lt;> 'NEW' Then&amp;#10;&#x9;&#x9;&#x9; &#x9;  Create_Record ;&amp;#10;&#x9;&#x9;&#x9; End if ;&amp;#10;&#x9;&#x9;&#x9; &amp;#10;&#x9;&#x9;&#x9; PKG_VARS.T_Check( i ) := 0 ;&amp;#10;&#x9;&#x9;&#x9;&#x9;  &amp;#10;&#x9;&#x9;&#x9;&#x9;  LN$C := 0 ;&amp;#10;&#x9;&#x9;      LN$N := 0 ;&amp;#10;&#x9;&#x9;      LN$D := 0 ;&#x9;&#x9;&#x9; &amp;#10;&amp;#10;&#x9;     For j in 2 .. PKG_VARS.T_Datas(i).Last loop&amp;#10;&amp;#10;&#x9;&#x9;&#x9;&#x9;  LC$Type := PKG_VARS.T_Struct(j)(2) ;&amp;#10;&#x9;&#x9;      If LC$Type = '1' Then -- Char&amp;#10;&#x9;&#x9;        &#x9; LC$Item := 'TI_C_' ;&amp;#10;&#x9;&#x9;        &#x9; LN$C := LN$C + 1 ;&amp;#10;&#x9;&#x9;        &#x9; LN$Num := LN$C ;&amp;#10;&#x9;&#x9;      Elsif LC$Type = '2' Then -- Number&amp;#10;&#x9;&#x9;        &#x9; LC$Item := 'TI_N_' ;&amp;#10;&#x9;&#x9;        &#x9; LN$N := LN$N + 1 ;&amp;#10;&#x9;&#x9;        &#x9; LN$Num := LN$N ;&amp;#10;&#x9;&#x9;      Else&amp;#10;&#x9;&#x9;        &#x9;-- Date&amp;#10;&#x9;&#x9;        &#x9;LC$Item := 'TI_D_' ;&amp;#10;&#x9;&#x9;        &#x9;LN$D := LN$D + 1 ;&amp;#10;&#x9;&#x9;        &#x9;LN$Num := LN$D ;&amp;#10;&#x9;&#x9;      End if ;&amp;#10;&#x9;        LC$Item := LC$Item || Ltrim( To_char(LN$Num, '00' ) ) ;&amp;#10;&amp;#10;&#x9;        Copy( PKG_VARS.T_Datas(i)(j), LC$Item ) ; &amp;#10;&#x9;     End loop ;&amp;#10;&#x9;     &amp;#10;&#x9;     :BL1.INDICE := i ;&amp;#10;&#x9;     &amp;#10;&#x9;     Set_Record_Property( Get_Block_Property( 'BL1', CURRENT_RECORD ), 'BL1', STATUS, QUERY_STATUS ) ;&amp;#10;&#x9;&amp;#10;&#x9;&#x9;End loop ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;First_Record ;&amp;#10;&#x9;&#x9;Go_Item( PKG_VARS.GC$FirstItem ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;PKG_VARS.GB$Query := FALSE ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;-- Grants ? --&amp;#10;&#x9;&#x9;If Instr( GR$Rec.D_GRANT, 'I' ) > 0 Then&amp;#10;&#x9;&#x9;&#x9;  Set_Block_Property( 'BL1', INSERT_ALLOWED, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;Else&amp;#10;&#x9;&#x9;&#x9;  Set_Block_Property( 'BL1', INSERT_ALLOWED, PROPERTY_FALSE ) ;&amp;#10;&#x9;&#x9;End if ;&amp;#10;&#x9;&#x9;If Instr( GR$Rec.D_GRANT, 'I' ) > 0 Then&amp;#10;&#x9;&#x9;&#x9;  Set_Block_Property( 'BL1', UPDATE_ALLOWED, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;Else&amp;#10;&#x9;&#x9;&#x9;  Set_Block_Property( 'BL1', UPDATE_ALLOWED, PROPERTY_FALSE ) ;&amp;#10;&#x9;&#x9;End if ;&amp;#10;&#x9;&#x9;If Instr( GR$Rec.D_GRANT, 'D' ) > 0 Then&amp;#10;&#x9;&#x9;&#x9;  Set_Block_Property( 'BL1', DELETE_ALLOWED, PROPERTY_TRUE ) ;&amp;#10;&#x9;&#x9;Else&amp;#10;&#x9;&#x9;&#x9;  Set_Block_Property( 'BL1', DELETE_ALLOWED, PROPERTY_FALSE ) ;&amp;#10;&#x9;&#x9;End if ;&#x9;&#x9;&amp;#10;&#x9;&amp;#10;  End Query ;&amp;#10;  &amp;#10;  &amp;#10;  -----------------------&amp;#10;  --  Get Dialog info  --&amp;#10;  -----------------------&amp;#10;  Procedure Get_Dialog_Info ( PC$DlgName IN Varchar2 )&amp;#10;  IS&amp;#10;  Begin&amp;#10;  &#x9;&amp;#10;  &#x9;Select * &amp;#10;  &#x9;Into   GR$Rec&amp;#10;  &#x9;From   DYN_DIALOG&amp;#10;  &#x9;Where  D_NAME = PC$DlgName&amp;#10;  &#x9;;&amp;#10;  Exception&amp;#10;  &#x9;When NO_DATA_FOUND Then&amp;#10;  &#x9;    Message( PC$DlgName || ' not found' ) ;&amp;#10;  End Get_Dialog_Info ;&amp;#10;  &amp;#10;  ------------------&amp;#10;  --  Update raw  --&amp;#10;  ------------------&amp;#10;  Procedure Update_Raw&amp;#10;  Is&amp;#10;    LC$Item  Varchar2(61) ;&amp;#10;  Begin&amp;#10;  &#x9;&amp;#10;  &#x9;LC$Item := PKG_VARS.GC$FirstItem ;&amp;#10;  &#x9;For i IN 2 .. PKG_VARS.T_Struct.Last Loop&amp;#10;  &#x9;   PKG_VARS.T_Datas(:BL1.INDICE)(i) := Name_In( LC$Item ) ;&amp;#10;  &#x9;   LC$Item := Get_Item_Property( LC$Item, NEXT_NAVIGATION_ITEM ) ;&amp;#10;  &#x9;End loop ;&amp;#10;  &#x9;&amp;#10;  End Update_Raw ;&amp;#10;    &amp;#10;&amp;#10;  -----------------------&amp;#10;  --  Get Column info  --&amp;#10;  -----------------------&amp;#10;  Function Get_Col_Info ( PC$ColName IN Varchar2, PR$Col OUT DYN_COLS%ROWTYPE )&amp;#10;  Return Boolean &amp;#10;  Is&amp;#10;  Begin&amp;#10;  &#x9;For i IN PKG_VARS.T_cols.First .. PKG_VARS.T_Cols.Last Loop&amp;#10;  &#x9;&#x9;  If PKG_VARS.T_cols(i).C_COL = PC$ColName Then&amp;#10;  &#x9;&#x9;  &#x9;  PR$Col := PKG_VARS.T_cols(i) ;&amp;#10;  &#x9;&#x9;  &#x9;  Return TRUE ;&amp;#10;  &#x9;&#x9;  End if ; &amp;#10;  &#x9;End loop ;&amp;#10;  &#x9;&amp;#10;  &#x9;Return FALSE ;&amp;#10;  &#x9;&amp;#10;  End Get_Col_Info ;&amp;#10;  &amp;#10;END;" ProgramUnitType="Package Body"/>
      <ProgramUnit Name="START_QRY" ProgramUnitText="PROCEDURE Start_QRY IS&amp;#10;  LC$Item  Varchar2(60) ;&amp;#10;BEGIN&amp;#10;  &amp;#10;  -- Colorize queryable items --&amp;#10;&#x9;LC$Item := PKG_VARS.GC$FirstItem ;&amp;#10;&#x9;For i IN PKG_VARS.T_Cols.First .. PKG_VARS.T_Cols.Last Loop&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;If Get_Item_Property( LC$ITEM, QUERYABLE ) = 'TRUE' Then&amp;#10;&#x9;&#x9;&#x9; Set_Item_Property( LC$Item, VISUAL_ATTRIBUTE, 'VA_ENTERQRY' ) ;&amp;#10;&#x9;&#x9;End if ;&amp;#10;&#x9;&amp;#10;&#x9;&#x9;LC$Item := Get_Item_Property( LC$ITEM, NEXT_NAVIGATION_ITEM ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;End loop ;&amp;#10;&#x9;&amp;#10;END;" ProgramUnitType="Procedure"/>
      <ProgramUnit Name="STOP_QRY" ProgramUnitText="PROCEDURE Stop_QRY IS&amp;#10;  LC$Item  Varchar2(60) ;&amp;#10;BEGIN&amp;#10;  &amp;#10;  -- Colorize queryable items --&amp;#10;&#x9;LC$Item := PKG_VARS.GC$FirstItem ;&amp;#10;&#x9;For i IN PKG_VARS.T_Cols.First .. PKG_VARS.T_Cols.Last Loop&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;If Get_Item_Property( LC$ITEM, QUERYABLE ) = 'TRUE' Then&amp;#10;&#x9;&#x9;&#x9; Set_Item_Property( LC$Item, VISUAL_ATTRIBUTE, '' ) ;&amp;#10;&#x9;&#x9;End if ;&amp;#10;&#x9;&amp;#10;&#x9;&#x9;LC$Item := Get_Item_Property( LC$ITEM, NEXT_NAVIGATION_ITEM ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;End loop ;&amp;#10;&#x9;&amp;#10;END;" ProgramUnitType="Procedure"/>
      <Trigger Name="WHEN-NEW-FORM-INSTANCE" DirtyInfo="true" TriggerText="Declare&amp;#10;&#x9;LC$Req   Varchar2(1024) ;&amp;#10;Begin&amp;#10;&amp;#10;  -- MDI title --&amp;#10;  Set_Window_Property&amp;#10;  (&amp;#10;    FORMS_MDI_WINDOW, &amp;#10;    TITLE, &amp;#10;    'Oracle Forms 9i/10g  -  100% Dynamic !'&amp;#10;   ) ;&amp;#10;   &amp;#10;  -- Choose the dialog --&amp;#10;  PKG_DATAS.Get_Dialog_Info( :PARAMETER.PM$Dialog ) ;  &amp;#10;    &amp;#10;  -- Build the screen --&amp;#10;  PKG_DATAS.Build( 'BL1' ) ;  &amp;#10;  &amp;#10;  -- Query datas --&amp;#10;  PKG_DATAS.Query( 'BL1' ) ;&amp;#10;&#x9;&amp;#10;End ;&#x9;&amp;#10;&#x9;"/>
      <Trigger Name="WHEN-VALIDATE-ITEM" DirtyInfo="true" TriggerText="Declare&amp;#10;&#x9;LB$Res     Boolean ;&amp;#10;&#x9;LC$ErrMsg  Varchar2(256) ;&amp;#10;&#x9;LC$Type    Varchar2(30) ;&amp;#10;&#x9;LC$Bak     Varchar2(30) ;&amp;#10;&#x9;LN$ErrNo   Number ;&amp;#10;&#x9;LC$ErrTxt  Varchar2(256);&amp;#10;&#x9;LN$Rec  Pls_Integer ;&amp;#10;Begin&#x9;&amp;#10;&amp;#10;&#x9;LN$Rec := Get_Block_Property( 'BL1', CURRENT_RECORD) ;&amp;#10;&amp;#10;&#x9;-------------------------&amp;#10;&#x9;--  When-Validate_Item --&amp;#10;&#x9;-------------------------&amp;#10;&#x9;&amp;#10;&#x9;If Name_In( :System.Trigger_Item ) IS NOT NULL Then&amp;#10;&#x9;&#x9;&amp;#10;&#x9;LC$Type := Get_Item_Property( :System.Trigger_Item, DATATYPE ) ;&amp;#10;&#x9;&amp;#10;&#x9;If LC$Type IN ( 'DATE', 'DATETIME' ) Then&amp;#10;&#x9;&#x9; LC$Type := 'D' ;&amp;#10;&#x9;&#x9; LC$Bak := 'CTRL.D' ;&amp;#10;&#x9;ElsIf LC$Type IN ( 'NUMBER' ) Then&amp;#10;&#x9;&#x9; LC$Type := 'N' ;&amp;#10;&#x9;&#x9; LC$Bak := 'CTRL.N' ;&amp;#10;&#x9;Else&amp;#10;&#x9;&#x9; LC$Type := 'C' ;&amp;#10;&#x9;&#x9; LC$Bak := 'CTRL.C' ;&amp;#10;&#x9;End if ;&amp;#10;&#x9;&#x9; &amp;#10;&#x9;LB$Res := PKG_DYNAMIC.Validation&amp;#10;&#x9;       (&amp;#10;&#x9;          PKG_DATAS.GR$Rec.D_NUM,&amp;#10;&#x9;          Get_Item_Property( :System.Trigger_Item, PROMPT_TEXT ),&amp;#10;&#x9;          LC$Type,&amp;#10;&#x9;          Name_In( :System.Trigger_Item ),&amp;#10;&#x9;          LC$ErrMsg&amp;#10;&#x9;       );&amp;#10;&#x9;       &amp;#10;&#x9;If Not LB$Res Then&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;  -- Validation failed --&amp;#10;&#x9;&#x9;  Bell ;&amp;#10;&#x9;&#x9;  Message( LC$ErrMsg ) ;&amp;#10;&#x9;&#x9;  Raise Form_trigger_failure ;&amp;#10;&#x9;&#x9;  &amp;#10;&#x9;End if ;&amp;#10;&#x9;&amp;#10;  -- Set the item as Modified --&amp;#10;  If Nvl( Name_In( :System.Trigger_Item ), CHR(10)) &lt;> Nvl( Name_In( LC$Bak ), CHR(10)) Then&amp;#10;  &#x9;&#x9; If PKG_VARS.T_Check( LN$Rec ) &lt;> 3 Then&amp;#10;  &#x9;&#x9;    PKG_VARS.T_Check( LN$Rec ) := 1 ;&amp;#10;  &#x9;&#x9; End if ;&amp;#10;  &#x9;&#x9; PKG_VARS.GB$Changed := TRUE ;&amp;#10;&#x9;     PKG_DATAS.Update_Raw ;&amp;#10;  End if ;&amp;#10;  &amp;#10;  &amp;#10;  End if ;&amp;#10;&#x9;&amp;#10;  Exception&amp;#10;  &#x9;When form_trigger_failure Then&amp;#10;  &#x9;   raise Form_trigger_failure ;&amp;#10;  &#x9;When Others Then&amp;#10;  &#x9;LN$ErrNo  := DBMS_ERROR_CODE ;&amp;#10;  &#x9;LC$ErrTxt := Substr( DBMS_ERROR_TEXT, 256 ) ;&amp;#10;  &#x9;If LN$ErrNo &lt;> -936 Then&amp;#10;  &#x9;&#x9; Message( LC$ErrTxt ) ;&amp;#10;  &#x9;End if ;&amp;#10;End ;&#x9;"/>
      <Trigger Name="PRE-FORM" DirtyInfo="true" TriggerText="Set_Application_Property( BUILTIN_DATE_FORMAT, 'DD/MM/YYYY HH24/MI:SS' ) ;&amp;#10;Set_Application_Property( PLSQL_DATE_FORMAT, 'DD/MM/YYYY HH24:MI:SS' ) ;&amp;#10;Forms_ddl( 'ALTER SESSION SET NLS_DATE_FORMAT=''DD/MM/YYYY HH24:MI:SS''') ;"/>
      <Trigger Name="WHEN-NEW-ITEM-INSTANCE" DirtyInfo="true" TriggerText="Declare&amp;#10;&#x9;LC$Type  Varchar2(30) ;&amp;#10;Begin&amp;#10;&#x9;&amp;#10;&#x9;LC$Type := Get_Item_Property( :System.Trigger_Item, DATATYPE ) ;&amp;#10;&#x9;&amp;#10;&#x9;If LC$Type IN ( 'DATE', 'DATETIME' ) Then&amp;#10;&#x9;&#x9; LC$Type := 'CTRL.D' ;&amp;#10;&#x9;ElsIf LC$Type IN ( 'NUMBER' ) Then&amp;#10;&#x9;&#x9; LC$Type := 'CTRL.N' ;&amp;#10;&#x9;Else&amp;#10;&#x9;&#x9; LC$Type := 'CTRL.C' ;&amp;#10;&#x9;End if ;&amp;#10;&#x9;&amp;#10;&#x9;Copy( Name_In( :System.Trigger_Item ), LC$Type ) ;&amp;#10;&#x9;&amp;#10;End ;&#x9;"/>
      <Trigger Name="KEY-COMMIT" DirtyInfo="true" TriggerText="Declare&amp;#10;&#x9;LB$Res  Boolean ;&amp;#10;&#x9;LC$Msg  Varchar2(1024) ;&amp;#10;&#x9;LN$Del  Pls_Integer := 0 ;&amp;#10;&#x9;LN$Upd  Pls_Integer := 0 ;&amp;#10;&#x9;LN$Ins  Pls_Integer := 0 ;&amp;#10;&#x9;LC$Res  Varchar2(100) ;&amp;#10;Begin&#x9;&amp;#10;&amp;#10;Enter ;&amp;#10;&amp;#10;execute_trigger('WHEN-VALIDATE-RECORD');&amp;#10;&amp;#10;-- Delete orders --&amp;#10;For i IN PKG_VARS.T_Check.First .. PKG_VARS.T_Check.Last Loop&amp;#10;&amp;#10;&#x9;If PKG_VARS.T_Check( i ) = 2 Then &amp;#10;&#x9;   -- Delete raw --&amp;#10;&#x9;   LB$Res := PKG_DYNAMIC.Delete_Row( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Datas(i), LC$Msg ) ;&amp;#10;&#x9;   If LB$Res Then&amp;#10;&#x9;   &#x9;  LN$Del := LN$Del + 1 ;&amp;#10;&#x9;   Else&amp;#10;&#x9;   &#x9;  Message( LC$Msg );&amp;#10;&#x9;   &#x9;  Raise form_trigger_failure ;&amp;#10;&#x9;   End if ;&amp;#10;&#x9;End if ;&amp;#10;&amp;#10;End loop ;&amp;#10;&amp;#10;-- Update orders --&amp;#10;For i IN PKG_VARS.T_Check.First .. PKG_VARS.T_Check.Last Loop&amp;#10;&amp;#10;&#x9;If PKG_VARS.T_Check( i ) = 1 And PKG_VARS.T_Datas(i)(1) IS NOT NULL Then &amp;#10;&#x9;   -- Update raw --&amp;#10;&#x9;   LB$Res := PKG_DYNAMIC.Update_Row( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Struct, PKG_VARS.T_Datas(i), LC$Msg ) ;&amp;#10;&#x9;   If LB$Res Then&amp;#10;&#x9;   &#x9;  LN$Upd := LN$Upd + 1 ;&amp;#10;&#x9;   Else&amp;#10;&#x9;   &#x9;  Message( LC$Msg );&amp;#10;&#x9;   &#x9;  Raise form_trigger_failure ;&amp;#10;&#x9;   End if ;&amp;#10;&#x9;End if ;&amp;#10;&amp;#10;End loop ;&amp;#10;&amp;#10;-- Insert orders --&amp;#10;For i IN PKG_VARS.T_Check.First .. PKG_VARS.T_Check.Last Loop&amp;#10;&amp;#10;&#x9;If PKG_VARS.T_Check( i ) = 3 Then &amp;#10;&#x9;   -- Insert raw --&amp;#10;&#x9;   LB$Res := PKG_DYNAMIC.Insert_Row( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Struct, PKG_VARS.T_Datas(i), LC$Msg ) ;&amp;#10;&#x9;   If LB$Res Then&amp;#10;&#x9;   &#x9;  LN$Ins := LN$Ins + 1 ;&amp;#10;&#x9;   Else&amp;#10;&#x9;   &#x9;  Message( LC$Msg );&amp;#10;&#x9;   &#x9;  Raise form_trigger_failure ;&amp;#10;&#x9;   End if ;&amp;#10;&#x9;End if ;&amp;#10;&amp;#10;End loop ;&amp;#10;&amp;#10;:System.Message_Level := 25 ;&amp;#10;Commit ;&amp;#10;:System.Message_Level := 0 ;&amp;#10;&amp;#10;PKG_VARS.GB$Changed := FALSE ;&amp;#10;&amp;#10;-- Set status for all records to QUERY --&amp;#10;For i IN PKG_VARS.T_Check.First .. PKG_VARS.T_Check.Last Loop&amp;#10;&#x9;PKG_VARS.T_Check( i ) := 0 ;&amp;#10;End loop ;&amp;#10;&amp;#10;-- Records saved --&amp;#10;LC$Res := 'Records : ' ;&amp;#10;If LN$Del > 0 Then&amp;#10;&#x9;LC$Res := LC$Res || 'Del=' || Ltrim(To_char( LN$Del ) ) || ' ' ;&amp;#10;End if ;&amp;#10;If LN$Upd > 0 Then&amp;#10;&#x9;LC$Res := LC$Res || 'Upd=' || Ltrim(To_char( LN$Upd ) ) || ' ' ;&amp;#10;End if ;&amp;#10;If LN$Ins > 0 Then&amp;#10;&#x9;LC$Res := LC$Res || 'Ins=' || Ltrim(To_char( LN$Ins ) ) ;&amp;#10;End if ;&#x9;&amp;#10;Clear_Message ;&amp;#10;Message( LC$Res, no_acknowledge ) ;&amp;#10;&amp;#10;End ;"/>
      <Trigger Name="WHEN-VALIDATE-RECORD" DirtyInfo="true" TriggerText="If :BL1.INDICE is not null Then&amp;#10;&amp;#10;  Validate( RECORD_SCOPE ) ;&amp;#10;&amp;#10;  IF  Form_Success THEN &amp;#10;&amp;#10;&#x9;  If PKG_VARS.T_Check( :BL1.INDICE ) = 2 Then&amp;#10;&#x9;&amp;#10;&#x9;   PKG_VARS.GB$Changed := TRUE ;&amp;#10;&#x9;   --message('update raw', no_acknowledge);&amp;#10;&#x9;   PKG_DATAS.Update_Raw ;&amp;#10;&#x9;   &amp;#10;&#x9;  ElsIf PKG_VARS.T_Check( :BL1.INDICE ) = 3 Then&amp;#10;&#x9;  &#x9;PKG_VARS.GB$Changed := TRUE ;&amp;#10;&#x9;  &#x9;--message('insert raw', no_acknowledge) ;&amp;#10;&#x9;  &#x9;PKG_DATAS.Update_Raw ;&amp;#10;&#x9;  End if ;   &amp;#10;  &amp;#10;  End if ;&amp;#10;  &amp;#10;End if ;"/>
      <Trigger Name="KEY-EXIT" DirtyInfo="true" TriggerText="Begin&#x9;&amp;#10;&#x9;If :System.mode = 'ENTER-QUERY' Then&amp;#10;&#x9;&#x9; Exit_Form ;&amp;#10;&#x9;Else&amp;#10;&#x9;&amp;#10;&#x9;  execute_trigger('WHEN-VALIDATE-ITEM');&amp;#10;&#x9;&amp;#10;&#x9;  execute_trigger('WHEN-VALIDATE-RECORD');&amp;#10;&#x9;  &amp;#10;&#x9;&#x9;If PKG_VARS.GB$Changed = TRUE Then&amp;#10;&#x9;&#x9;&#x9;If Show_Alert( 'AL_EXIT' ) = ALERT_BUTTON1 Then&amp;#10;&#x9;&#x9;&#x9;&#x9; Do_Key( 'KEY_COMMIT' ) ;&amp;#10;&#x9;&#x9;&#x9;End if ;&amp;#10;&#x9;&#x9;End if ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;&#x9;Exit_Form( NO_VALIDATE ) ;&amp;#10;&#x9;&#x9;&amp;#10;&#x9;End if ;&#x9;&amp;#10;&amp;#10;&#x9;Exception&amp;#10;&#x9;&#x9;When Form_Trigger_Failure Then&amp;#10;&#x9;&#x9;  Raise ;&amp;#10;End ;&#x9;&#x9;  "/>
      <VisualAttribute Name="VA_CURREC" BackColor="r75g100b75"/>
      <VisualAttribute Name="VA_ENTERQRY" BackColor="r100g100b88" DirtyInfo="true"/>
      <Window Name="WIN1" DirtyInfo="true" Title="DYNAMIC_FORM" Width="720" Height="432"/>
   </FormModule>
</Module>
