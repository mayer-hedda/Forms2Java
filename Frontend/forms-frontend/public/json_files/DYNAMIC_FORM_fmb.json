{
  "version" : "141020000",
  "FormModule" : {
    "Name" : "DYNAMIC_FORM",
    "DirtyInfo" : "true",
    "Title" : "dynamic_form",
    "ConsoleWindow" : "WIN1",
    "RecordVisualAttributeGroupName" : "",
    "MenuModule" : "DEFAULT&SMARTBAR",
    "Coordinate" : {
      "CharacterCellWidth" : "9",
      "RealUnit" : "Pixel",
      "DefaultFontScaling" : "false",
      "CharacterCellHeight" : "19",
      "CoordinateSystem" : "Real"
    },
    "Alert" : {
      "Name" : "AL_EXIT",
      "DirtyInfo" : "true",
      "Button1Label" : "Yes",
      "Button2Label" : "No",
      "Title" : "Exit the form",
      "AlertMessage" : "Do you want to commit the change ?"
    },
    "Block" : [ {
      "Name" : "CTRL",
      "DirtyInfo" : "true",
      "ScrollbarWidth" : "18",
      "ScrollbarLength" : "180",
      "Item" : [ {
        "Name" : "C",
        "DirtyInfo" : "true",
        "Width" : "90",
        "MaximumLength" : "4000",
        "Visible" : "false",
        "Height" : "18"
      }, {
        "Name" : "N",
        "DirtyInfo" : "true",
        "Width" : "90",
        "MaximumLength" : "30",
        "Visible" : "false",
        "DataType" : "Number",
        "Height" : "18"
      }, {
        "Name" : "D",
        "DirtyInfo" : "true",
        "Width" : "90",
        "MaximumLength" : "30",
        "Visible" : "false",
        "DataType" : "Date",
        "Height" : "18"
      }, {
        "Name" : "TITLE_BL1",
        "TabPageName" : "",
        "Width" : "379",
        "InsertAllowed" : "false",
        "MaximumLength" : "100",
        "UpdateAllowed" : "false",
        "XPosition" : "16",
        "FontName" : "Tahoma",
        "YPosition" : "7",
        "Bevel" : "None",
        "FontSize" : "800",
        "FontStyle" : "Plain",
        "DirtyInfo" : "true",
        "FontWeight" : "Bold",
        "FontSpacing" : "Normal",
        "CanvasName" : "CV1",
        "Height" : "18"
      } ]
    }, {
      "Name" : "BL1",
      "RecordsDisplayCount" : "17",
      "InsertAllowed" : "true",
      "RecordVisualAttributeGroupName" : "VA_CURREC",
      "DirtyInfo" : "true",
      "ScrollbarCanvasName" : "SPREAD",
      "ScrollbarTabPageName" : "",
      "QueryDataSourceType" : "Transactional Triggers",
      "ScrollbarWidth" : "19",
      "ScrollbarXPosition" : "509",
      "ScrollbarYPosition" : "25",
      "ShowScrollbar" : "false",
      "ScrollbarLength" : "320",
      "Item" : [ {
        "Name" : "INDICE",
        "DatabaseItem" : "false",
        "DirtyInfo" : "true",
        "Width" : "90",
        "Visible" : "false",
        "DataType" : "Number",
        "Height" : "18"
      }, {
        "Name" : "TI_C_01",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "13",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_02",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "110",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_03",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_04",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_05",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_06",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "13",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_07",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "110",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_08",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_09",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_10",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_11",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "13",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_12",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "110",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_13",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_14",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_15",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_16",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "13",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_17",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "110",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_18",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_19",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_C_20",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "4000",
        "BackColor" : "white",
        "XPosition" : "207",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_01",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "305",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_02",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_03",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_04",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_05",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_06",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "305",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_07",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_08",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_09",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_N_10",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Number",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_D_01",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Datetime",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "FormatMask" : "DD/MM/YYYY",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_D_02",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Datetime",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "FormatMask" : "DD/MM/YYYY",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_D_03",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Datetime",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "FormatMask" : "DD/MM/YYYY",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_D_04",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Datetime",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "FormatMask" : "DD/MM/YYYY",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      }, {
        "Name" : "TI_D_05",
        "PromptAttachmentEdge" : "Top",
        "TabPageName" : "",
        "Width" : "91",
        "MaximumLength" : "30",
        "DataType" : "Datetime",
        "BackColor" : "white",
        "XPosition" : "402",
        "YPosition" : "24",
        "DirtyInfo" : "true",
        "FormatMask" : "DD/MM/YYYY",
        "CanvasName" : "SPREAD",
        "Visible" : "true",
        "QueryLength" : "4001",
        "Height" : "19"
      } ],
      "Trigger" : [ {
        "Name" : "KEY-DELREC",
        "DirtyInfo" : "true",
        "TriggerText" : "Declare&#10;\tLN$Rec    Pls_Integer ;&#10;\tLC$Rowid  Varchar2(50); &#10;Begin\t&#10;\t&#10;\t-- Mark record to Deleting --&#10;\tLN$Rec := :BL1.INDICE ;&#10;&#10;\tLC$Rowid := PKG_VARS.T_Datas(LN$Rec)(1) ;&#10;&#10;\t:CTRL.C := Null ;&#10;\t:CTRL.N := Null ;&#10;\t:CTRL.D := Null ;&#10;\t&#10;\tDelete_Record ;&#10;&#10;\tIf LC$Rowid IS NOT NULL Then&#10;\t  PKG_VARS.T_Check( LN$Rec ) := 2 ;&#10;\t  PKG_VARS.GB$Changed := TRUE ;&#10;\tElse&#10;\t\tPKG_VARS.T_Check( LN$Rec ) := 0 ;&#10;\tEnd if ;&#10;\t&#10;End ;"
      }, {
        "Name" : "WHEN-CREATE-RECORD",
        "DirtyInfo" : "true",
        "TriggerText" : "Declare&#10;\tLC$Item   Varchar2(60) ;&#10;Begin\t&#10;  If :System.mode <> 'ENTER-QUERY' Then&#10;&#10;\tIf Not PKG_VARS.GB$Query Then&#10;\t&#10;\t\t:BL1.INDICE := PKG_VARS.T_Datas.Last + 1 ;&#10;&#10;\t\tPKG_VARS.T_Check( :BL1.INDICE ) := 3 ;&#10;\t\tPKG_VARS.T_Datas( :BL1.INDICE )(1) := NULL ;&#10;\t\t&#10;\t\t-- Set Initial values --&#10;\t\tLC$Item := PKG_VARS.GC$FirstItem ;&#10;\t\tFor i IN PKG_VARS.T_Cols.First .. PKG_VARS.T_Cols.Last Loop&#10;\t\t\t&#10;\t\t\tIf PKG_VARS.T_Cols(i).C_INITVALUE is not null Then&#10;\t\t\t\t If PKG_VARS.T_Cols(i).C_INITVALUE = 'SYSDATE' Then&#10;\t\t\t\t \t Copy( SYSDATE, LC$Item ) ;&#10;\t\t\t\t Else&#10;\t\t\t\t   Copy( PKG_VARS.T_Cols(i).C_INITVALUE, LC$Item ) ;&#10;\t\t\t\t End if ;&#10;\t\t\tEnd if ;&#10;\t\t\t&#10;\t\t\tLC$Item := Get_Item_Property( LC$ITEM, NEXT_NAVIGATION_ITEM ) ;&#10;\t\t\t&#10;\t\tEnd loop ;&#10;\t&#10;\tEnd if ;&#10;\t&#10;\tEnd if ;&#10;End ;"
      }, {
        "Name" : "WHEN-NEW-RECORD-INSTANCE",
        "DirtyInfo" : "true",
        "TriggerText" : "-- Place focus on First navigable item --&#10;If Not PKG_VARS.GB$Query Then&#10;\tIf :System.Record_Status = 'NEW' Then&#10;\t  Go_Item( PKG_VARS.GC$FirstItem ) ;&#10;\tEnd if ;&#10;End if ;"
      }, {
        "Name" : "KEY-EXEQRY",
        "DirtyInfo" : "true",
        "TriggerText" : "Declare&#10;\tLC$Item  Varchar2(61) ;&#10;\tLC$Clause Varchar2(200) ;&#10;\tLC$Where Varchar2(2000) ;&#10;\tLC$Key   Varchar2(10) := ' WHERE ' ;&#10;\tLC$Type  Varchar2(30) ;&#10;Begin\t&#10;  &#10;  If :System.mode = 'ENTER-QUERY' Then&#10;  -- Init the Where clause --&#10;\tLC$Item := PKG_VARS.GC$FirstItem ;&#10;\tFor i IN PKG_VARS.T_Cols.First .. PKG_VARS.T_Cols.Last Loop&#10;\t\t&#10;\t\tLC$Type := Get_Item_Property( LC$Item, DATATYPE ) ;&#10;\t\tLC$Clause := Name_In( LC$Item ) ;&#10;\t\tIf LC$Clause Is Not Null Then&#10;\t\t\t If Instr( LC$Clause, '>' ) > 0&#10;\t\t\t Or Instr( LC$Clause, '<' ) > 0&#10;\t\t\t Or Instr( Upper(LC$Clause), 'BETWEEN' ) > 0&#10;\t\t\t Or Instr( Upper(LC$Clause), 'LIKE' ) > 0&#10;\t\t\t Then&#10;\t\t\t    LC$Where := LC$Where || LC$Key || PKG_VARS.T_Cols(i).C_COL || ' ' || LC$Clause ;&#10;\t\t\t    LC$Key := ' AND ' ;&#10;\t\t\t Else&#10;\t\t\t    If LC$Type = 'NUMBER' Then&#10;\t\t\t       LC$Where := LC$Where || LC$Key || PKG_VARS.T_Cols(i).C_COL || ' = ' || LC$Clause ;&#10;\t\t\t    Else&#10;\t\t\t    \tLC$Where := LC$Where || LC$Key || PKG_VARS.T_Cols(i).C_COL || ' = ''' || LC$Clause || '''' ;&#10;\t\t\t    End if ;&#10;\t\t\t    LC$Key := ' AND ' ;\t\t\t \t&#10;\t\t\t End if ;&#10;\t\tEnd if ;&#10;\t&#10;\t\tLC$Item := Get_Item_Property( LC$ITEM, NEXT_NAVIGATION_ITEM ) ;&#10;\t\t&#10;\tEnd loop ;&#10;  &#10;     --F_Trace('Query : ' || LC$Where, 'T' ) ;  &#10;     Stop_QRY ;&#10;  \t Exit_Form ;&#10;  End if ;&#10;  &#10;  Clear_Message ;&#10;  &#10;  -- Query datas --&#10;  PKG_DATAS.Query( :System.Trigger_Block, LC$Where ) ;&#10;  &#10;End ;  "
      }, {
        "Name" : "KEY-ENTQRY",
        "DirtyInfo" : "true",
        "TriggerText" : "Start_QRY ;&#10;Enter_Query ;"
      }, {
        "Name" : "PRE-QUERY",
        "DirtyInfo" : "true",
        "TriggerText" : "Message('pre-query',acknowledge);"
      }, {
        "Name" : "ON-LOCK",
        "DirtyInfo" : "true",
        "TriggerText" : "Declare&#10;\tLC$Err   Varchar2(256) ;&#10;\tLB$Ret   Boolean ;&#10;Begin\t&#10;  LB$Ret := PKG_DYNAMIC.Lock_Row( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Datas(:BL1.INDICE), LC$Err ) ;&#10;End ;"
      } ]
    } ],
    "Canvas" : [ {
      "Name" : "CV1",
      "BackColor" : "r100g100b100",
      "DirtyInfo" : "true",
      "Width" : "720",
      "WindowName" : "WIN1",
      "Height" : "432",
      "ViewportHeight" : "432",
      "ViewportWidth" : "720"
    }, {
      "Name" : "SPREAD",
      "ShowHorizontalScrollbar" : "true",
      "CanvasType" : "Stacked",
      "Width" : "2000",
      "WindowName" : "WIN1",
      "BackColor" : "r75g100b88",
      "DirtyInfo" : "true",
      "ForegroundColor" : "black",
      "DisplayViewport" : "true",
      "ShowVerticalScrollbar" : "true",
      "Height" : "400",
      "ViewportHeight" : "380",
      "ViewportXPosition" : "7",
      "ViewportWidth" : "680",
      "ViewportYPosition" : "36"
    } ],
    "ModuleParameter" : {
      "Name" : "PM$DIALOG",
      "DirtyInfo" : "true",
      "ParameterInitializeValue" : "Employees"
    },
    "ProgramUnit" : [ {
      "Name" : "PKG_VARS",
      "ProgramUnitText" : "PACKAGE PKG_VARS IS&#10;&#10;  TYPE TYP_CHECK IS TABLE OF PLS_INTEGER INDEX BY PLS_INTEGER ;&#10;  &#10;  T_Struct   PKG_DYNAMIC.T2 ;&#10;  T_Datas    PKG_DYNAMIC.T2 ;&#10;  T_Query    PKG_DYNAMIC.T1 ;&#10;  T_Cols     PKG_DYNAMIC.TYP_COLS ;&#10;  T_Check    TYP_CHECK ;&#10;  &#10;  GC$Req     Varchar2(4000) ;&#10;  &#10;  GN$NbRaws  Pls_Integer := 0 ;&#10;  &#10;  GC$Dialog  DYN_DIALOG.D_NAME%Type ;&#10;  &#10;  GC$FirstItem  Varchar2(60) ;&#10;  &#10;  GB$Query    Boolean := FALSE ;&#10;  &#10;  GB$Changed  Boolean := FALSE ;&#10;    &#10;END;",
      "ProgramUnitType" : "Package Spec"
    }, {
      "Name" : "PKG_DATAS",
      "ProgramUnitText" : "PACKAGE PKG_DATAS IS&#10;  &#10;  GR$Rec  DYN_DIALOG%ROWTYPE ;&#10;   &#10;  -- Build the block--&#10;  Procedure Build ( PC$BlkName IN Varchar2 ) ;&#10;  &#10;  -- Query the bloc --&#10;  Procedure Query ( PC$BlkName IN Varchar2, PC$Where IN Varchar2 DEFAULT NULL ) ;&#10;  &#10;  -- Get Dialog info --&#10;  Procedure Get_Dialog_Info ( PC$DlgName IN Varchar2 ) ;&#10;  &#10;  -- Update raw --&#10;  Procedure Update_Raw ;&#10;&#10;  -- Get Column info --&#10;  Function Get_Col_Info ( PC$ColName IN Varchar2, PR$Col OUT DYN_COLS%ROWTYPE )&#10;  Return Boolean ;&#10;  &#10;END;",
      "ProgramUnitType" : "Package Spec"
    }, {
      "Name" : "PKG_DATAS",
      "ProgramUnitText" : "PACKAGE BODY PKG_DATAS IS&#10;  &#10;  -----------------------&#10;  --  Build the block  --&#10;  -----------------------&#10;  Procedure Build ( PC$BlkName IN Varchar2 )&#10;  Is&#10;\t\tLC$Req   Varchar2(1024) ;&#10;\t\tLC$Item  Varchar2(60) ;&#10;\t\tLC$First Varchar2(60) ;&#10;\t\tLC$Prev  Varchar2(60) ;&#10;\t\tLC$Next  Varchar2(60) ;    &#10;\t\tLC$Name  Varchar2(30) ;&#10;\t\tLC$Type  Varchar2(3) ;&#10;    LN$NNull Pls_Integer ;&#10;\t\tLN$Prec  Pls_Integer ;&#10;\t\tLN$Size  Pls_Integer ;&#10;\t\tLN$Width Pls_Integer ;&#10;\t\tLN$TotX  Pls_Integer ;&#10;\t\tLN$C     Pls_Integer := 0 ;&#10;\t\tLN$N     Pls_Integer := 0 ;&#10;\t\tLN$D     Pls_Integer := 0 ;&#10;\t\tLN$Num   Pls_Integer ;&#10;\t\tLN$X     Pls_Integer ;&#10;\t\tLN$Y     Pls_Integer ;&#10;\t\tLR$Col   DYN_COLS%ROWTYPE ;&#10;\t\tLB$Res   Boolean ;&#10;  Begin&#10;  \t&#10;        &#10;\t\tLN$X := Get_Item_Property( 'TI_C_01', X_POS ) ;&#10;\t\t&#10;\t\t-- Select order of the dialog --&#10;\t\tLC$Req := GR$Rec.d_query ;&#10;\t\t&#10;\t\t-- Get data structure --&#10;\t\tPKG_DYNAMIC.Get_Struct( LC$Req, PKG_VARS.T_Struct ) ;&#10;\t\t&#10;\t\t-- Get columns info --&#10;\t\tPKG_DYNAMIC.Get_Cols_Info ( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Cols ) ;&#10;\t\t&#10;\t\t-- Set the title of the block --&#10;\t\tGo_Item( 'CTRL.TITLE_BL1' ) ;&#10;\t\tLC$Item := 'TITLE_' || PC$BlkName  ;&#10;\t\tCopy( GR$Rec.D_TITLE, LC$Item ) ;&#10;\t\t&#10;\t\t-- Set the Title of the window --&#10;\t\tSet_Window_Property( 'WIN1', TITLE, GR$Rec.D_NAME ) ;&#10;\t\t&#10;    -- Hide all columns --&#10;    For I IN 1 .. 20 Loop&#10;    \t LC$Item := PC$BlkName || '.TI_C_' || Ltrim( To_Char( i, '00' ) ) ;&#10;    \t Set_Item_Property( LC$Item, VISIBLE, PROPERTY_FALSE ) ;&#10;    End loop ;&#10;    For I IN 1 .. 10 Loop&#10;    \t LC$Item := PC$BlkName || '.TI_N_' || Ltrim( To_Char( i, '00' ) ) ;&#10;    \t Set_Item_Property( LC$Item, VISIBLE, PROPERTY_FALSE ) ;&#10;    End loop ;&#10;    For I IN 1 .. 5 Loop&#10;    \t LC$Item := PC$BlkName || '.TI_D_' || Ltrim( To_Char( i, '00' ) ) ;&#10;    \t Set_Item_Property( LC$Item, VISIBLE, PROPERTY_FALSE ) ;&#10;    End loop ;    &#10;    &#10;\t\t-- Display corresponding columns --&#10;\t\tFor i IN PKG_VARS.T_Struct.First .. PKG_VARS.T_Struct.Last Loop&#10;&#10;\t        LC$Name := PKG_VARS.T_Struct(i)(1) ;&#10;\t        &#10;\t        If LC$Name <> 'ROWID' Then&#10;\t        \t&#10;            LB$Res := Get_Col_Info ( LC$Name, LR$Col ) ;&#10;            &#10;\t\t        LC$Type := PKG_VARS.T_Struct(i)(2) ;&#10;\t\t        LN$Prec := PKG_VARS.T_Struct(i)(3) ;&#10;\t\t        If LN$Prec = 0 Then&#10;\t\t        \t LN$Prec := 15 ;&#10;\t\t        End if ;&#10;\t\t        LN$Size := PKG_VARS.T_Struct(i)(5) ;&#10;\t&#10;\t\t        If LC$Type = '1' Then -- Char&#10;\t\t        \t LC$Item := 'TI_C_' ;&#10;\t\t        \t LN$C := LN$C + 1 ;&#10;\t\t        \t LN$Num := LN$C ;&#10;\t        \t   LN$Width := LN$Size  * 12 ;&#10;\t\t        Elsif LC$Type = '2' Then -- Number&#10;\t\t        \t LC$Item := 'TI_N_' ;&#10;\t\t        \t LN$N := LN$N + 1 ;&#10;\t\t        \t LN$Num := LN$N ;&#10;\t        \t   LN$Width := LN$Prec  * 12 ;&#10;\t\t        Else&#10;\t\t        \t-- Date&#10;\t\t        \tLC$Item := 'TI_D_' ;&#10;\t\t        \tLN$D := LN$D + 1 ;&#10;\t\t        \tLN$Num := LN$D ;&#10;\t\t        \tLN$Width := 80 ;&#10;\t\t        End if ;&#10;\t&#10;\t\t        LC$Item := PC$BlkName || '.' || LC$Item || Ltrim( To_char(LN$Num, '00' ) ) ;&#10;\t\t        If LB$Res And LR$Col.C_VISIBLE = 'Y' Then&#10;\t\t        If LN$X + LN$Width > Get_Canvas_Property( 'SPREAD', WIDTH ) Then&#10;\t\t        \t Set_Canvas_Property( 'SPREAD', WIDTH, LN$X + LN$Width + 20 ) ;&#10;\t\t        End if ;&#10;\t\t        End if ;&#10;\t\t        &#10;\t\t        -- Previous/Next item --&#10;\t\t        If LB$Res And LR$Col.C_VISIBLE = 'Y' Then&#10;\t\t        If i = 2 Then&#10;\t\t        \t  LC$First := LC$Item ;&#10;\t\t        \t  LC$Prev := LC$Item ;&#10;\t\t        \t  PKG_VARS.GC$FirstItem := LC$First ;&#10;\t\t        Else&#10;\t\t            Set_Item_Property( LC$Item, PREVIOUS_NAVIGATION_ITEM, LC$Prev ) ;&#10;\t\t            Set_Item_Property( LC$Prev, NEXT_NAVIGATION_ITEM, LC$Item ) ;\t \t &#10;\t\t            LC$Prev := LC$Item ;&#10;\t\t        End if ;&#10;\t\t        End if ;&#10;\t\t        &#10;            Set_Item_Property( LC$Item, PROMPT_TEXT, InitCap(LC$Name) ) ;&#10;            If LB$Res And LR$Col.C_VISIBLE = 'Y' Then&#10;\t\t           Set_Item_Property( LC$Item, VISIBLE, PROPERTY_TRUE ) ;&#10;            Else&#10;            \t Set_Item_Property( LC$Item, VISIBLE, PROPERTY_FALSE ) ;&#10;            End if ;&#10;            If LB$Res And LR$Col.C_VISIBLE = 'Y' Then&#10;\t\t          Set_Item_Property( LC$Item, ENABLED, PROPERTY_TRUE ) ;&#10;\t\t          Set_Item_Property( LC$Item, NAVIGABLE, PROPERTY_TRUE ) ;&#10;\t\t          Set_Item_Property( LC$Item, INSERT_ALLOWED, PROPERTY_TRUE ) ;&#10;\t\t          Set_Item_Property( LC$Item, UPDATE_ALLOWED, PROPERTY_TRUE ) ;&#10;\t\t          Set_Item_Property( LC$Item, WIDTH, LN$Width ) ;&#10;\t\t          Set_Item_Property( LC$Item, X_POS, LN$X ) ;&#10;\t\t          LN$X := LN$X + LN$Width ;&#10;\t\t        End if ;&#10;\t\t        &#10;\t\t        -- Column setting --&#10;\t\t        If LB$Res Then&#10;\t\t        \t Set_Item_Property( LC$Item, PROMPT_TEXT, LR$Col.C_LABEL ) ;&#10;\t\t        \t If LR$Col.C_REQUIRED = 'Y' Then&#10;\t\t        \t \t  Set_Item_Property( LC$Item, REQUIRED, PROPERTY_TRUE ) ;&#10;\t\t        \t Else&#10;\t\t        \t \t  Set_Item_Property( LC$Item, REQUIRED, PROPERTY_FALSE ) ;&#10;\t\t        \t End if ;&#10;\t\t        \t If LR$Col.C_MASK IS NOT NULL Then&#10;\t\t        \t \t  Set_Item_Property( LC$Item, FORMAT_MASK, LR$Col.C_MASK ) ;&#10;\t\t        \t End if ;&#10;\t\t        \t If LR$Col.C_QUERYABLE = 'Y' Then&#10;\t\t        \t \t  Set_Item_Property( LC$Item, QUERYABLE, PROPERTY_TRUE ) ;&#10;\t\t        \t Else&#10;\t\t        \t \t  Set_Item_Property( LC$Item, QUERYABLE, PROPERTY_FALSE ) ;\t\t        \t \t  &#10;\t\t        \t End if ;&#10;\t\t        \t If LR$Col.C_CASE = 'U' Then&#10;\t\t        \t \t  Set_Item_Property( LC$Item, CASE_RESTRICTION, UPPERCASE ) ;&#10;\t\t        \t ElsIf LR$Col.C_CASE = 'L' Then&#10;\t\t        \t \t  Set_Item_Property( LC$Item, CASE_RESTRICTION, LOWERCASE ) ;&#10;\t\t        \t Else&#10;\t\t        \t \t  Set_Item_Property( LC$Item, CASE_RESTRICTION, NONE ) ;\t\t        \t \t  &#10;\t\t        \t End if ;\t\t        \t \t\t        \t \t\t        \t &#10;\t\t        End if ;\t\t        &#10;\t        &#10;\t        End if ;&#10;\t&#10;\t\tEnd loop ;&#10;\t\t&#10;\t\t-- Previous/Next item for first and last items --&#10;\t\tSet_Item_Property( LC$Item,  NEXT_NAVIGATION_ITEM, LC$First ) ;&#10;\t\tSet_Item_Property( LC$First, PREVIOUS_NAVIGATION_ITEM, LC$Item ) ;&#10;\t\t&#10;\t\tLN$X := LN$X + 10 ;&#10;&#10;\t\tIf PKG_VARS.GN$NbRaws > 0 Then&#10;\t\t  Set_View_Property( 'SPREAD', HEIGHT, (PKG_VARS.GN$NbRaws * 20 ) + 20) ;\t\t&#10;\t\tEnd if ;&#10;&#10;\t\t&#10;\t\t  \t&#10;  End Build ;&#10;  &#10;  &#10;  -----------------------&#10;  --  Query the block  --&#10;  -----------------------&#10;  Procedure Query ( PC$BlkName IN Varchar2, PC$Where IN Varchar2 DEFAULT NULL )&#10;  Is&#10;\t\tLC$Req   Varchar2(1024) ;&#10;\t\tLC$Item  Varchar2(30) ;&#10;\t\tLC$Type  Varchar2(3) ;&#10;\t\tLN$C     Pls_Integer := 0 ;&#10;\t\tLN$N     Pls_Integer := 0 ;&#10;\t\tLN$D     Pls_Integer := 0 ;&#10;\t\tLN$Num   Pls_Integer ;&#10;  Begin&#10;&#10;\t\tPKG_VARS.GB$Query := TRUE ;&#10;\t\t&#10;\t\tLC$Req := GR$Rec.d_query ;&#10;\t\t&#10;\t\tGo_Block( PC$BlkName ) ;&#10;\t\tIf not FORM_SUCCESS Then&#10;\t\t\t Raise Form_Trigger_Failure ;&#10;\t\tEnd if ;&#10;\t\t&#10;\t\tClear_Block( ASK_COMMIT ) ;&#10;\t\t&#10;\t\tSet_Block_Property( 'BL1', INSERT_ALLOWED, PROPERTY_TRUE ) ;&#10;\t\t&#10;\t\t-- Query the datas --&#10;\t\tPKG_DYNAMIC.Dynamic_Cursor( LC$Req, PKG_VARS.T_Struct, PKG_VARS.T_Datas, PC$Where ) ;&#10;\t\t&#10;\t\t-- Display datas --&#10;\t\tFor i IN PKG_VARS.T_Datas.First .. PKG_VARS.T_Datas.Last Loop&#10;&#10;\t\t\t If :System.record_Status <> 'NEW' Then&#10;\t\t\t \t  Create_Record ;&#10;\t\t\t End if ;&#10;\t\t\t &#10;\t\t\t PKG_VARS.T_Check( i ) := 0 ;&#10;\t\t\t\t  &#10;\t\t\t\t  LN$C := 0 ;&#10;\t\t      LN$N := 0 ;&#10;\t\t      LN$D := 0 ;\t\t\t &#10;&#10;\t     For j in 2 .. PKG_VARS.T_Datas(i).Last loop&#10;&#10;\t\t\t\t  LC$Type := PKG_VARS.T_Struct(j)(2) ;&#10;\t\t      If LC$Type = '1' Then -- Char&#10;\t\t        \t LC$Item := 'TI_C_' ;&#10;\t\t        \t LN$C := LN$C + 1 ;&#10;\t\t        \t LN$Num := LN$C ;&#10;\t\t      Elsif LC$Type = '2' Then -- Number&#10;\t\t        \t LC$Item := 'TI_N_' ;&#10;\t\t        \t LN$N := LN$N + 1 ;&#10;\t\t        \t LN$Num := LN$N ;&#10;\t\t      Else&#10;\t\t        \t-- Date&#10;\t\t        \tLC$Item := 'TI_D_' ;&#10;\t\t        \tLN$D := LN$D + 1 ;&#10;\t\t        \tLN$Num := LN$D ;&#10;\t\t      End if ;&#10;\t        LC$Item := LC$Item || Ltrim( To_char(LN$Num, '00' ) ) ;&#10;&#10;\t        Copy( PKG_VARS.T_Datas(i)(j), LC$Item ) ; &#10;\t     End loop ;&#10;\t     &#10;\t     :BL1.INDICE := i ;&#10;\t     &#10;\t     Set_Record_Property( Get_Block_Property( 'BL1', CURRENT_RECORD ), 'BL1', STATUS, QUERY_STATUS ) ;&#10;\t&#10;\t\tEnd loop ;&#10;\t\t&#10;\t\tFirst_Record ;&#10;\t\tGo_Item( PKG_VARS.GC$FirstItem ) ;&#10;\t\t&#10;\t\tPKG_VARS.GB$Query := FALSE ;&#10;\t\t&#10;\t\t-- Grants ? --&#10;\t\tIf Instr( GR$Rec.D_GRANT, 'I' ) > 0 Then&#10;\t\t\t  Set_Block_Property( 'BL1', INSERT_ALLOWED, PROPERTY_TRUE ) ;&#10;\t\tElse&#10;\t\t\t  Set_Block_Property( 'BL1', INSERT_ALLOWED, PROPERTY_FALSE ) ;&#10;\t\tEnd if ;&#10;\t\tIf Instr( GR$Rec.D_GRANT, 'I' ) > 0 Then&#10;\t\t\t  Set_Block_Property( 'BL1', UPDATE_ALLOWED, PROPERTY_TRUE ) ;&#10;\t\tElse&#10;\t\t\t  Set_Block_Property( 'BL1', UPDATE_ALLOWED, PROPERTY_FALSE ) ;&#10;\t\tEnd if ;&#10;\t\tIf Instr( GR$Rec.D_GRANT, 'D' ) > 0 Then&#10;\t\t\t  Set_Block_Property( 'BL1', DELETE_ALLOWED, PROPERTY_TRUE ) ;&#10;\t\tElse&#10;\t\t\t  Set_Block_Property( 'BL1', DELETE_ALLOWED, PROPERTY_FALSE ) ;&#10;\t\tEnd if ;\t\t&#10;\t&#10;  End Query ;&#10;  &#10;  &#10;  -----------------------&#10;  --  Get Dialog info  --&#10;  -----------------------&#10;  Procedure Get_Dialog_Info ( PC$DlgName IN Varchar2 )&#10;  IS&#10;  Begin&#10;  \t&#10;  \tSelect * &#10;  \tInto   GR$Rec&#10;  \tFrom   DYN_DIALOG&#10;  \tWhere  D_NAME = PC$DlgName&#10;  \t;&#10;  Exception&#10;  \tWhen NO_DATA_FOUND Then&#10;  \t    Message( PC$DlgName || ' not found' ) ;&#10;  End Get_Dialog_Info ;&#10;  &#10;  ------------------&#10;  --  Update raw  --&#10;  ------------------&#10;  Procedure Update_Raw&#10;  Is&#10;    LC$Item  Varchar2(61) ;&#10;  Begin&#10;  \t&#10;  \tLC$Item := PKG_VARS.GC$FirstItem ;&#10;  \tFor i IN 2 .. PKG_VARS.T_Struct.Last Loop&#10;  \t   PKG_VARS.T_Datas(:BL1.INDICE)(i) := Name_In( LC$Item ) ;&#10;  \t   LC$Item := Get_Item_Property( LC$Item, NEXT_NAVIGATION_ITEM ) ;&#10;  \tEnd loop ;&#10;  \t&#10;  End Update_Raw ;&#10;    &#10;&#10;  -----------------------&#10;  --  Get Column info  --&#10;  -----------------------&#10;  Function Get_Col_Info ( PC$ColName IN Varchar2, PR$Col OUT DYN_COLS%ROWTYPE )&#10;  Return Boolean &#10;  Is&#10;  Begin&#10;  \tFor i IN PKG_VARS.T_cols.First .. PKG_VARS.T_Cols.Last Loop&#10;  \t\t  If PKG_VARS.T_cols(i).C_COL = PC$ColName Then&#10;  \t\t  \t  PR$Col := PKG_VARS.T_cols(i) ;&#10;  \t\t  \t  Return TRUE ;&#10;  \t\t  End if ; &#10;  \tEnd loop ;&#10;  \t&#10;  \tReturn FALSE ;&#10;  \t&#10;  End Get_Col_Info ;&#10;  &#10;END;",
      "ProgramUnitType" : "Package Body"
    }, {
      "Name" : "START_QRY",
      "ProgramUnitText" : "PROCEDURE Start_QRY IS&#10;  LC$Item  Varchar2(60) ;&#10;BEGIN&#10;  &#10;  -- Colorize queryable items --&#10;\tLC$Item := PKG_VARS.GC$FirstItem ;&#10;\tFor i IN PKG_VARS.T_Cols.First .. PKG_VARS.T_Cols.Last Loop&#10;\t\t&#10;\t\tIf Get_Item_Property( LC$ITEM, QUERYABLE ) = 'TRUE' Then&#10;\t\t\t Set_Item_Property( LC$Item, VISUAL_ATTRIBUTE, 'VA_ENTERQRY' ) ;&#10;\t\tEnd if ;&#10;\t&#10;\t\tLC$Item := Get_Item_Property( LC$ITEM, NEXT_NAVIGATION_ITEM ) ;&#10;\t\t&#10;\tEnd loop ;&#10;\t&#10;END;",
      "ProgramUnitType" : "Procedure"
    }, {
      "Name" : "STOP_QRY",
      "ProgramUnitText" : "PROCEDURE Stop_QRY IS&#10;  LC$Item  Varchar2(60) ;&#10;BEGIN&#10;  &#10;  -- Colorize queryable items --&#10;\tLC$Item := PKG_VARS.GC$FirstItem ;&#10;\tFor i IN PKG_VARS.T_Cols.First .. PKG_VARS.T_Cols.Last Loop&#10;\t\t&#10;\t\tIf Get_Item_Property( LC$ITEM, QUERYABLE ) = 'TRUE' Then&#10;\t\t\t Set_Item_Property( LC$Item, VISUAL_ATTRIBUTE, '' ) ;&#10;\t\tEnd if ;&#10;\t&#10;\t\tLC$Item := Get_Item_Property( LC$ITEM, NEXT_NAVIGATION_ITEM ) ;&#10;\t\t&#10;\tEnd loop ;&#10;\t&#10;END;",
      "ProgramUnitType" : "Procedure"
    } ],
    "Trigger" : [ {
      "Name" : "WHEN-NEW-FORM-INSTANCE",
      "DirtyInfo" : "true",
      "TriggerText" : "Declare&#10;\tLC$Req   Varchar2(1024) ;&#10;Begin&#10;&#10;  -- MDI title --&#10;  Set_Window_Property&#10;  (&#10;    FORMS_MDI_WINDOW, &#10;    TITLE, &#10;    'Oracle Forms 9i/10g  -  100% Dynamic !'&#10;   ) ;&#10;   &#10;  -- Choose the dialog --&#10;  PKG_DATAS.Get_Dialog_Info( :PARAMETER.PM$Dialog ) ;  &#10;    &#10;  -- Build the screen --&#10;  PKG_DATAS.Build( 'BL1' ) ;  &#10;  &#10;  -- Query datas --&#10;  PKG_DATAS.Query( 'BL1' ) ;&#10;\t&#10;End ;\t&#10;\t"
    }, {
      "Name" : "WHEN-VALIDATE-ITEM",
      "DirtyInfo" : "true",
      "TriggerText" : "Declare&#10;\tLB$Res     Boolean ;&#10;\tLC$ErrMsg  Varchar2(256) ;&#10;\tLC$Type    Varchar2(30) ;&#10;\tLC$Bak     Varchar2(30) ;&#10;\tLN$ErrNo   Number ;&#10;\tLC$ErrTxt  Varchar2(256);&#10;\tLN$Rec  Pls_Integer ;&#10;Begin\t&#10;&#10;\tLN$Rec := Get_Block_Property( 'BL1', CURRENT_RECORD) ;&#10;&#10;\t-------------------------&#10;\t--  When-Validate_Item --&#10;\t-------------------------&#10;\t&#10;\tIf Name_In( :System.Trigger_Item ) IS NOT NULL Then&#10;\t\t&#10;\tLC$Type := Get_Item_Property( :System.Trigger_Item, DATATYPE ) ;&#10;\t&#10;\tIf LC$Type IN ( 'DATE', 'DATETIME' ) Then&#10;\t\t LC$Type := 'D' ;&#10;\t\t LC$Bak := 'CTRL.D' ;&#10;\tElsIf LC$Type IN ( 'NUMBER' ) Then&#10;\t\t LC$Type := 'N' ;&#10;\t\t LC$Bak := 'CTRL.N' ;&#10;\tElse&#10;\t\t LC$Type := 'C' ;&#10;\t\t LC$Bak := 'CTRL.C' ;&#10;\tEnd if ;&#10;\t\t &#10;\tLB$Res := PKG_DYNAMIC.Validation&#10;\t       (&#10;\t          PKG_DATAS.GR$Rec.D_NUM,&#10;\t          Get_Item_Property( :System.Trigger_Item, PROMPT_TEXT ),&#10;\t          LC$Type,&#10;\t          Name_In( :System.Trigger_Item ),&#10;\t          LC$ErrMsg&#10;\t       );&#10;\t       &#10;\tIf Not LB$Res Then&#10;\t\t&#10;\t\t  -- Validation failed --&#10;\t\t  Bell ;&#10;\t\t  Message( LC$ErrMsg ) ;&#10;\t\t  Raise Form_trigger_failure ;&#10;\t\t  &#10;\tEnd if ;&#10;\t&#10;  -- Set the item as Modified --&#10;  If Nvl( Name_In( :System.Trigger_Item ), CHR(10)) <> Nvl( Name_In( LC$Bak ), CHR(10)) Then&#10;  \t\t If PKG_VARS.T_Check( LN$Rec ) <> 3 Then&#10;  \t\t    PKG_VARS.T_Check( LN$Rec ) := 1 ;&#10;  \t\t End if ;&#10;  \t\t PKG_VARS.GB$Changed := TRUE ;&#10;\t     PKG_DATAS.Update_Raw ;&#10;  End if ;&#10;  &#10;  &#10;  End if ;&#10;\t&#10;  Exception&#10;  \tWhen form_trigger_failure Then&#10;  \t   raise Form_trigger_failure ;&#10;  \tWhen Others Then&#10;  \tLN$ErrNo  := DBMS_ERROR_CODE ;&#10;  \tLC$ErrTxt := Substr( DBMS_ERROR_TEXT, 256 ) ;&#10;  \tIf LN$ErrNo <> -936 Then&#10;  \t\t Message( LC$ErrTxt ) ;&#10;  \tEnd if ;&#10;End ;\t"
    }, {
      "Name" : "PRE-FORM",
      "DirtyInfo" : "true",
      "TriggerText" : "Set_Application_Property( BUILTIN_DATE_FORMAT, 'DD/MM/YYYY HH24/MI:SS' ) ;&#10;Set_Application_Property( PLSQL_DATE_FORMAT, 'DD/MM/YYYY HH24:MI:SS' ) ;&#10;Forms_ddl( 'ALTER SESSION SET NLS_DATE_FORMAT=''DD/MM/YYYY HH24:MI:SS''') ;"
    }, {
      "Name" : "WHEN-NEW-ITEM-INSTANCE",
      "DirtyInfo" : "true",
      "TriggerText" : "Declare&#10;\tLC$Type  Varchar2(30) ;&#10;Begin&#10;\t&#10;\tLC$Type := Get_Item_Property( :System.Trigger_Item, DATATYPE ) ;&#10;\t&#10;\tIf LC$Type IN ( 'DATE', 'DATETIME' ) Then&#10;\t\t LC$Type := 'CTRL.D' ;&#10;\tElsIf LC$Type IN ( 'NUMBER' ) Then&#10;\t\t LC$Type := 'CTRL.N' ;&#10;\tElse&#10;\t\t LC$Type := 'CTRL.C' ;&#10;\tEnd if ;&#10;\t&#10;\tCopy( Name_In( :System.Trigger_Item ), LC$Type ) ;&#10;\t&#10;End ;\t"
    }, {
      "Name" : "KEY-COMMIT",
      "DirtyInfo" : "true",
      "TriggerText" : "Declare&#10;\tLB$Res  Boolean ;&#10;\tLC$Msg  Varchar2(1024) ;&#10;\tLN$Del  Pls_Integer := 0 ;&#10;\tLN$Upd  Pls_Integer := 0 ;&#10;\tLN$Ins  Pls_Integer := 0 ;&#10;\tLC$Res  Varchar2(100) ;&#10;Begin\t&#10;&#10;Enter ;&#10;&#10;execute_trigger('WHEN-VALIDATE-RECORD');&#10;&#10;-- Delete orders --&#10;For i IN PKG_VARS.T_Check.First .. PKG_VARS.T_Check.Last Loop&#10;&#10;\tIf PKG_VARS.T_Check( i ) = 2 Then &#10;\t   -- Delete raw --&#10;\t   LB$Res := PKG_DYNAMIC.Delete_Row( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Datas(i), LC$Msg ) ;&#10;\t   If LB$Res Then&#10;\t   \t  LN$Del := LN$Del + 1 ;&#10;\t   Else&#10;\t   \t  Message( LC$Msg );&#10;\t   \t  Raise form_trigger_failure ;&#10;\t   End if ;&#10;\tEnd if ;&#10;&#10;End loop ;&#10;&#10;-- Update orders --&#10;For i IN PKG_VARS.T_Check.First .. PKG_VARS.T_Check.Last Loop&#10;&#10;\tIf PKG_VARS.T_Check( i ) = 1 And PKG_VARS.T_Datas(i)(1) IS NOT NULL Then &#10;\t   -- Update raw --&#10;\t   LB$Res := PKG_DYNAMIC.Update_Row( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Struct, PKG_VARS.T_Datas(i), LC$Msg ) ;&#10;\t   If LB$Res Then&#10;\t   \t  LN$Upd := LN$Upd + 1 ;&#10;\t   Else&#10;\t   \t  Message( LC$Msg );&#10;\t   \t  Raise form_trigger_failure ;&#10;\t   End if ;&#10;\tEnd if ;&#10;&#10;End loop ;&#10;&#10;-- Insert orders --&#10;For i IN PKG_VARS.T_Check.First .. PKG_VARS.T_Check.Last Loop&#10;&#10;\tIf PKG_VARS.T_Check( i ) = 3 Then &#10;\t   -- Insert raw --&#10;\t   LB$Res := PKG_DYNAMIC.Insert_Row( PKG_DATAS.GR$Rec.D_NUM, PKG_VARS.T_Struct, PKG_VARS.T_Datas(i), LC$Msg ) ;&#10;\t   If LB$Res Then&#10;\t   \t  LN$Ins := LN$Ins + 1 ;&#10;\t   Else&#10;\t   \t  Message( LC$Msg );&#10;\t   \t  Raise form_trigger_failure ;&#10;\t   End if ;&#10;\tEnd if ;&#10;&#10;End loop ;&#10;&#10;:System.Message_Level := 25 ;&#10;Commit ;&#10;:System.Message_Level := 0 ;&#10;&#10;PKG_VARS.GB$Changed := FALSE ;&#10;&#10;-- Set status for all records to QUERY --&#10;For i IN PKG_VARS.T_Check.First .. PKG_VARS.T_Check.Last Loop&#10;\tPKG_VARS.T_Check( i ) := 0 ;&#10;End loop ;&#10;&#10;-- Records saved --&#10;LC$Res := 'Records : ' ;&#10;If LN$Del > 0 Then&#10;\tLC$Res := LC$Res || 'Del=' || Ltrim(To_char( LN$Del ) ) || ' ' ;&#10;End if ;&#10;If LN$Upd > 0 Then&#10;\tLC$Res := LC$Res || 'Upd=' || Ltrim(To_char( LN$Upd ) ) || ' ' ;&#10;End if ;&#10;If LN$Ins > 0 Then&#10;\tLC$Res := LC$Res || 'Ins=' || Ltrim(To_char( LN$Ins ) ) ;&#10;End if ;\t&#10;Clear_Message ;&#10;Message( LC$Res, no_acknowledge ) ;&#10;&#10;End ;"
    }, {
      "Name" : "WHEN-VALIDATE-RECORD",
      "DirtyInfo" : "true",
      "TriggerText" : "If :BL1.INDICE is not null Then&#10;&#10;  Validate( RECORD_SCOPE ) ;&#10;&#10;  IF  Form_Success THEN &#10;&#10;\t  If PKG_VARS.T_Check( :BL1.INDICE ) = 2 Then&#10;\t&#10;\t   PKG_VARS.GB$Changed := TRUE ;&#10;\t   --message('update raw', no_acknowledge);&#10;\t   PKG_DATAS.Update_Raw ;&#10;\t   &#10;\t  ElsIf PKG_VARS.T_Check( :BL1.INDICE ) = 3 Then&#10;\t  \tPKG_VARS.GB$Changed := TRUE ;&#10;\t  \t--message('insert raw', no_acknowledge) ;&#10;\t  \tPKG_DATAS.Update_Raw ;&#10;\t  End if ;   &#10;  &#10;  End if ;&#10;  &#10;End if ;"
    }, {
      "Name" : "KEY-EXIT",
      "DirtyInfo" : "true",
      "TriggerText" : "Begin\t&#10;\tIf :System.mode = 'ENTER-QUERY' Then&#10;\t\t Exit_Form ;&#10;\tElse&#10;\t&#10;\t  execute_trigger('WHEN-VALIDATE-ITEM');&#10;\t&#10;\t  execute_trigger('WHEN-VALIDATE-RECORD');&#10;\t  &#10;\t\tIf PKG_VARS.GB$Changed = TRUE Then&#10;\t\t\tIf Show_Alert( 'AL_EXIT' ) = ALERT_BUTTON1 Then&#10;\t\t\t\t Do_Key( 'KEY_COMMIT' ) ;&#10;\t\t\tEnd if ;&#10;\t\tEnd if ;&#10;\t\t&#10;\t\tExit_Form( NO_VALIDATE ) ;&#10;\t\t&#10;\tEnd if ;\t&#10;&#10;\tException&#10;\t\tWhen Form_Trigger_Failure Then&#10;\t\t  Raise ;&#10;End ;\t\t  "
    } ],
    "VisualAttribute" : [ {
      "Name" : "VA_CURREC",
      "BackColor" : "r75g100b75"
    }, {
      "Name" : "VA_ENTERQRY",
      "BackColor" : "r100g100b88",
      "DirtyInfo" : "true"
    } ],
    "Window" : {
      "Name" : "WIN1",
      "DirtyInfo" : "true",
      "Title" : "DYNAMIC_FORM",
      "Width" : "720",
      "Height" : "432"
    }
  }
}